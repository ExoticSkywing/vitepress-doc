
安装一些必备的软件包

```bash
sudo apt install wget curl sudo vim git unzip git-lfs python3-pip tree zip samba samba-common -y
```
国内服务器换源

```bash
# 进入换源目录
cd /etc/apt/

# 备份原文件
sudo cp sources.list sources.list.backup

# 查看是否已备份
ll

# 编辑原文件
sudo vim sources.list

# 清空内容
dG
```
复制以下内容，并右键粘贴到服务器

```bash
deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse

```
更新软件包索引
更改源后，您需要更新软件包索引，以确保系统能够从新的源中获取软件包信息：
```bash
sudo apt-get update

# 升级软件包
sudo apt-get upgrade
```
## 安装码云repo工具，可以执行如下命令。

```bash
sudo curl https://gitee.com/oschina/repo/raw/fork_flow/repo-py3 -o /usr/local/bin/repo
sudo chmod a+x /usr/local/bin/repo
pip3 install -i https://repo.huaweicloud.com/repository/pypi/simple requests
```

## 拉取代码并编译

```bash
 	cd ~
	mkdir -p ohos_master && cd ohos_master
	repo init -u https://gitee.com/openharmony/manifest.git -b master --no-repo-verify
	repo sync -c
	repo forall -c 'git lfs pull'
	# 编译
	./build/build_scripts/env_setup.sh
	bash build/prebuilts_download.sh

    # 确保全量编译有前提依赖
    
    sudo apt-get install binutils binutils-dev git git-lfs gnupg flex bison gperf build-essential zip curl zlib1g-dev libc6-dev-i386 lib32ncurses5-dev x11proto-core-dev libx11-dev lib32z1-dev ccache libgl1-mesa-dev libxml2-utils xsltproc unzip m4 bc gnutls-bin python3.8 python3-pip ruby genext2fs device-tree-compiler make libffi-dev e2fsprogs pkg-config perl openssl libssl-dev libelf-dev libdwarf-dev u-boot-tools mtd-utils cpio doxygen liblz4-tool openjdk-8-jre gcc g++ texinfo dosfstools mtools default-jre default-jdk apt-utils wget scons tar rsync libxml2-dev grsync xxd libglib2.0-dev libpixman-1-dev kmod jfsutils reiserfsprogs xfsprogs squashfs-tools pcmciautils quota ppp libtinfo-dev libtinfo5 libncurses5-dev libncursesw5 libstdc++6 gcc-arm-none-eabi vim ssh locales libxinerama-dev libxcursor-dev libxrandr-dev libxi-dev
    
	#全量编译：
./build.sh --product-name rk3568 --ccache
# 单编USB北向
./build.sh --product-name rk3568 --ccache --build-target usb_manager --fast-rebuild

# 单编USB南向
./build.sh --product-name rk3568 --ccache --build-target=drivers_peripheral_usb --fast-rebuild
```

编译环境检查
```bash
./build/build_scripts/env_setup.sh
bash build/prebuilts_download.sh
```

```bash
# Python更新：
pip install --upgrade pip -i https://pypi.tuna.tsinghua.edu.cn/simple
# 安装samba
# 安装：
sudo apt installsamba
# 配置共享目录：
sudo vim /etc/samba/smb.conf
```
```yml
[home]
   comment = Shared Folder
   path = /home/liushiqiang  //修改为自己的user_name，下方禁用睡眠可以不用设置
   valid users = liushiqiang  //修改为自己的user_name
   directory mask = 0775
   create mask = 0775
   public = yes
   writable = yes
   available = yes
   browseable = yes
```  
```bash
sudo smbpasswd -a liushiqiang //修改为自己的user_name
sudo service smbd restart
```

系统配置
查看系统休眠策略